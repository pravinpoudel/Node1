"use strict";var express=require("express"),path=require("path"),http=require("http"),cors=require("cors"),thing=require("./routes/things"),apiRoute=require("./routes/apiRoute"),mongoose=require("mongoose"),_require=require("./middle"),sup=_require.sup,sup2=_require.sup2;require("dotenv").config();var app=express(),router=express.Router(),port=process.env.port||4e3;mongoose.connect(process.env.DB_CONNECT,{useNewUrlParser:!0,useUnifiedTopology:!0}).then(function(){console.log("sucessfully connected")}).catch(function(e){console.log("".concat(e," error is in the program"))}),app.use(cors()),app.use(express.json()),app.use("/things",thing),app.use("/api",apiRoute),app.set("views",path.join(__dirname,"views")),app.set("view engine","pug");var acceptedOrigin=["http://www.example1.com","http://www.example2.com","http://localhost:3000"],corsOption={origin:function(e,o){var r;o(-1===acceptedOrigin.indexOf(e)&&e?(r={origin:!1},new Error("this origin isnot allowded")):(r={origin:!0},null),r)}};app.use(router),router.get("/",cors(corsOption),sup,sup2,function(e,o){o.render("index"),console.log(e.url),console.log("root url is called"),o.sendFile("index.html",{root:path.join(__dirname,"/public/")})}),router.get("/old",function(e,o){o.redirect(302,"/new")}),router.get("/new",function(e,o){o.send("<h1> I AM NEW </h1>")}),app.use(express.static("public",{index:!1})),app.listen(port,function(e){if(e)return console.log("i am listening");console.log("listening to the port ".concat(port))});
//# sourceMappingURL=index.min.js.map
