{"version":3,"sources":["things.js"],"names":["express","require","router","Router","bcrypt","saltRound","req","res","next","console","log","authMiddleware","use","post","user","regeneratorRuntime","async","_context","prev","body","data","t0","Date","now","t1","name","t2","awrap","hash","password","t3","sent","t4","t5","_id","age","role","status","send","t6","concat","stop","_submittedPassword","savedPassword","fakeHashedPassword","_context2","submittedPassword","compare","message","error","route","get","passwordMatched","params","mouseid","put"],"mappings":"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","file":"things.min.js","sourcesContent":["'use strict';\r\nconst express = require(\"express\");\r\nconst bcrypt = require(\"bcrypt\");\r\nconst router = express.Router();\r\nlet saltRound = 13;\r\n\r\n\r\nconst authMiddleware = (req, res, next)=>{\r\n    console.log(\"authenticiation is called\");\r\n    next();\r\n}\r\n\r\nrouter.use(authMiddleware);\r\n\r\nrouter.get(\"/\", (req, resp)=>{\r\n\r\n    console.log(\"i am inside root of this router-thing\");\r\n});\r\n\r\nrouter.post(\"/register\", async(req, res, next)=> {\r\n    try{\r\n        console.log(\"i am herer\")\r\n        console.log(req.body.data);\r\n        let user = {\r\n            _id: Date.now(),\r\n            name: req.body.data.name,\r\n            email:req.body.data.email,\r\n            password: await bcrypt.hash(req.body.data.password, saltRound),\r\n            age:req.body.data.age,\r\n            role:req.body.data.role\r\n        }\r\n\r\n        await res.status(201).send(user);\r\n    }\r\n    catch(err){\r\n        console.log(`${err} error happened`)\r\n    }\r\n}\r\n);\r\n\r\n\r\nrouter.post(\"/login\", async(req, res, next)=>{\r\n    \r\n    try{\r\n        //check if that email exist otherwise there is no point of hashing submitted password\r\n        let userMatched = true;\r\n        if(userMatched){\r\n    \r\n            let submittedPassword = req.body.data.password; \r\n            let savedPassword = await bcrypt.hash('Pulchowk@123', saltRound);\r\n            let passwordMatched = bcrypt.compare(submittedPassword, savedPassword);\r\n    \r\n            if(passwordMatched){\r\n    \r\n                console.log(\" party !! do login\");\r\n                res.status(200).send({status:200, message:\"guest is our user\"}) \r\n            }\r\n    \r\n            else{\r\n                console.log(\"sorry we dont recognize you\");\r\n                res.status(401).send({status: 401, error: \"Password didn't matched\" });\r\n            }\r\n    \r\n        }\r\n        //if that email doesnot match we don't send response within the spot rather we consume\r\n        //same amount time it take for if email matches\r\n        else {\r\n    \r\n            // fake pass\r\n            let fakeHashedPassword = `$2B$${saltRound}passwordisaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa`;\r\n            bcrypt.compare(submittedPassword, fakeHashedPassword);\r\n            res.status(401).send({status:401, error:\"your credential doesnot match with ours\"});\r\n        }\r\n            \r\n    }\r\n    catch(err){\r\n        console.log(`${err} is catched`);\r\n    }\r\n});\r\n\r\n\r\n\r\nrouter.route(\"/mouse\")\r\n    .get((req, res)=>{\r\n        console.log(\"get all mouse\");\r\n    })\r\n    .put((req, res)=>{\r\n        console.log(\"add new mouse\");\r\n    })\r\n\r\nrouter.route(\"/mouse/:mouseid\")\r\n.get((req, res)=>{\r\n    console.log(`i demand the mouse with id ${req.params.mouseid}`);\r\n})\r\n.put((req, res)=>[\r\n    console.log(`i demand to update the mouse with id of ${req.params.mouseid}`)\r\n])\r\n\r\nmodule.exports = router;\r\n"]}